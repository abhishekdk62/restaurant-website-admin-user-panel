<link rel="stylesheet" href="/styles/userlogin.css" />

<div class="glass-container">
  <div class="login-box">
    <h2>Sign up</h2>
    <form id="signupForm" onsubmit="return formvalidate(event)" action="/user/signup" method="POST">

    {{!-- <input type="text" id="msg" value={{message}} hidden> --}}
          <input type="text" id="email" name="email" placeholder="Email" />

<input type="password" id="password" name="password" placeholder="Password" />
<input type="password" id="confirmpassword" name="confirmpassword" placeholder="Confirm Password" />


      <div class="options">
        <h3 class="warning" id="error-message"></h3>
      </div>

      <button type="submit">Sign up</button>

      <p>Already have an account? <a href="/user/signin" id="register">Login</a></p>
    </form>
  </div>
</div>

<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<script>


  function formvalidate(e) {
    // Prevent form submission for validation checks
    e.preventDefault();

    var email = document.getElementById("email").value.trim();
    var password = document.getElementById("password").value.trim();
    var confirmpassword = document.getElementById("confirmpassword").value.trim();

    // Clear previous error messages
    document.getElementById("error-message").innerHTML = "";

    // Check if any field is empty
    if (email === "" || password === "" || confirmpassword === "") {
      swal("All fields are required");
      return false; // Stop form submission
    }

    // Validate email format
    var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
      swal("Please enter a valid email address");
      return false; // Stop form submission
    }

    // Check password length
    if (password.length < 6) {
      swal("Password must be at least 6 characters long");
      return false; // Stop form submission
    }

    // Check if passwords match
    if (password !== confirmpassword) {
      swal("Passwords do not match");
      return false; // Stop form submission
    }

    // If all validations pass, submit the form
    document.getElementById("signupForm").submit(); // Explicitly submit the form
  }
const msg = "{{message}}";
  if (msg) {
    swal(msg);
  }
    

</script>
